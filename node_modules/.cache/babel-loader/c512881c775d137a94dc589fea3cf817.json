{"remainingRequest":"/Users/rowan/Desktop/vue-admin-template/node_modules/babel-loader/lib/index.js!/Users/rowan/Desktop/vue-admin-template/src/store/modules/user.js","dependencies":[{"path":"/Users/rowan/Desktop/vue-admin-template/src/store/modules/user.js","mtime":1658300783714},{"path":"/Users/rowan/Desktop/vue-admin-template/babel.config.js","mtime":1658220394241},{"path":"/Users/rowan/Desktop/vue-admin-template/node_modules/cache-loader/dist/cjs.js","mtime":1658220508757},{"path":"/Users/rowan/Desktop/vue-admin-template/node_modules/babel-loader/lib/index.js","mtime":1658220510466}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0IF9yZWdlbmVyYXRvclJ1bnRpbWUgZnJvbSAiL1VzZXJzL3Jvd2FuL0Rlc2t0b3AvdnVlLWFkbWluLXRlbXBsYXRlL25vZGVfbW9kdWxlcy9AYmFiZWwvcnVudGltZS9oZWxwZXJzL2VzbS9yZWdlbmVyYXRvclJ1bnRpbWUuanMiOwppbXBvcnQgX2FzeW5jVG9HZW5lcmF0b3IgZnJvbSAiL1VzZXJzL3Jvd2FuL0Rlc2t0b3AvdnVlLWFkbWluLXRlbXBsYXRlL25vZGVfbW9kdWxlcy9AYmFiZWwvcnVudGltZS9oZWxwZXJzL2VzbS9hc3luY1RvR2VuZXJhdG9yLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuZnVuY3Rpb24ubmFtZS5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLnN0cmluZy50cmltLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMub2JqZWN0LnRvLXN0cmluZy5qcyI7CmltcG9ydCB7IGxvZ2luIGFzIF9sb2dpbiwgbG9nb3V0IGFzIF9sb2dvdXQsIGdldEluZm8gYXMgX2dldEluZm8gfSBmcm9tICdAL2FwaS91c2VyJzsKaW1wb3J0IHsgZ2V0VG9rZW4sIHNldFRva2VuLCByZW1vdmVUb2tlbiB9IGZyb20gJ0AvdXRpbHMvYXV0aCc7CmltcG9ydCB7IHJlc2V0Um91dGVyIH0gZnJvbSAnQC9yb3V0ZXInOwoKdmFyIGdldERlZmF1bHRTdGF0ZSA9IGZ1bmN0aW9uIGdldERlZmF1bHRTdGF0ZSgpIHsKICByZXR1cm4gewogICAgdG9rZW46IGdldFRva2VuKCksCiAgICBuYW1lOiAnJywKICAgIGF2YXRhcjogJycKICB9Owp9OwoKdmFyIHN0YXRlID0gZ2V0RGVmYXVsdFN0YXRlKCk7CnZhciBtdXRhdGlvbnMgPSB7CiAgUkVTRVRfU1RBVEU6IGZ1bmN0aW9uIFJFU0VUX1NUQVRFKHN0YXRlKSB7CiAgICBPYmplY3QuYXNzaWduKHN0YXRlLCBnZXREZWZhdWx0U3RhdGUoKSk7CiAgfSwKICBTRVRfVE9LRU46IGZ1bmN0aW9uIFNFVF9UT0tFTihzdGF0ZSwgdG9rZW4pIHsKICAgIHN0YXRlLnRva2VuID0gdG9rZW47CiAgfSwKICBTRVRfTkFNRTogZnVuY3Rpb24gU0VUX05BTUUoc3RhdGUsIG5hbWUpIHsKICAgIHN0YXRlLm5hbWUgPSBuYW1lOwogIH0sCiAgU0VUX0FWQVRBUjogZnVuY3Rpb24gU0VUX0FWQVRBUihzdGF0ZSwgYXZhdGFyKSB7CiAgICBzdGF0ZS5hdmF0YXIgPSBhdmF0YXI7CiAgfQp9Owp2YXIgYWN0aW9ucyA9IHsKICAvLyB1c2VyIGxvZ2luCiAgbG9naW46IGZ1bmN0aW9uIGxvZ2luKF9yZWYsIHVzZXJJbmZvKSB7CiAgICByZXR1cm4gX2FzeW5jVG9HZW5lcmF0b3IoIC8qI19fUFVSRV9fKi9fcmVnZW5lcmF0b3JSdW50aW1lKCkubWFyayhmdW5jdGlvbiBfY2FsbGVlKCkgewogICAgICB2YXIgY29tbWl0LCB1c2VybmFtZSwgcGFzc3dvcmQsIHJlc3VsdDsKICAgICAgcmV0dXJuIF9yZWdlbmVyYXRvclJ1bnRpbWUoKS53cmFwKGZ1bmN0aW9uIF9jYWxsZWUkKF9jb250ZXh0KSB7CiAgICAgICAgd2hpbGUgKDEpIHsKICAgICAgICAgIHN3aXRjaCAoX2NvbnRleHQucHJldiA9IF9jb250ZXh0Lm5leHQpIHsKICAgICAgICAgICAgY2FzZSAwOgogICAgICAgICAgICAgIGNvbW1pdCA9IF9yZWYuY29tbWl0OwogICAgICAgICAgICAgIHVzZXJuYW1lID0gdXNlckluZm8udXNlcm5hbWUsIHBhc3N3b3JkID0gdXNlckluZm8ucGFzc3dvcmQ7CiAgICAgICAgICAgICAgX2NvbnRleHQubmV4dCA9IDQ7CiAgICAgICAgICAgICAgcmV0dXJuIF9sb2dpbih7CiAgICAgICAgICAgICAgICB1c2VybmFtZTogdXNlcm5hbWUudHJpbSgpLAogICAgICAgICAgICAgICAgcGFzc3dvcmQ6IHBhc3N3b3JkCiAgICAgICAgICAgICAgfSk7CgogICAgICAgICAgICBjYXNlIDQ6CiAgICAgICAgICAgICAgcmVzdWx0ID0gX2NvbnRleHQuc2VudDsKCiAgICAgICAgICAgICAgaWYgKCEocmVzdWx0LmNvZGUgPT09IDIwMCkpIHsKICAgICAgICAgICAgICAgIF9jb250ZXh0Lm5leHQgPSAxMTsKICAgICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgY29tbWl0KCdTRVRfVE9LRU4nLCByZXN1bHQuZGF0YS50b2tlbik7CiAgICAgICAgICAgICAgc2V0VG9rZW4ocmVzdWx0LmRhdGEudG9rZW4pOwogICAgICAgICAgICAgIHJldHVybiBfY29udGV4dC5hYnJ1cHQoInJldHVybiIsICdvaycpOwoKICAgICAgICAgICAgY2FzZSAxMToKICAgICAgICAgICAgICByZXR1cm4gX2NvbnRleHQuYWJydXB0KCJyZXR1cm4iLCBQcm9taXNlKG5ldyBFcnJvcignZmFpbGVkJykpKTsKCiAgICAgICAgICAgIGNhc2UgMTI6CiAgICAgICAgICAgIGNhc2UgImVuZCI6CiAgICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0LnN0b3AoKTsKICAgICAgICAgIH0KICAgICAgICB9CiAgICAgIH0sIF9jYWxsZWUpOwogICAgfSkpKCk7CiAgfSwKICAvLyBnZXQgdXNlciBpbmZvCiAgZ2V0SW5mbzogZnVuY3Rpb24gZ2V0SW5mbyhfcmVmMikgewogICAgcmV0dXJuIF9hc3luY1RvR2VuZXJhdG9yKCAvKiNfX1BVUkVfXyovX3JlZ2VuZXJhdG9yUnVudGltZSgpLm1hcmsoZnVuY3Rpb24gX2NhbGxlZTIoKSB7CiAgICAgIHZhciBjb21taXQsIHN0YXRlLCByZXN1bHQ7CiAgICAgIHJldHVybiBfcmVnZW5lcmF0b3JSdW50aW1lKCkud3JhcChmdW5jdGlvbiBfY2FsbGVlMiQoX2NvbnRleHQyKSB7CiAgICAgICAgd2hpbGUgKDEpIHsKICAgICAgICAgIHN3aXRjaCAoX2NvbnRleHQyLnByZXYgPSBfY29udGV4dDIubmV4dCkgewogICAgICAgICAgICBjYXNlIDA6CiAgICAgICAgICAgICAgY29tbWl0ID0gX3JlZjIuY29tbWl0LCBzdGF0ZSA9IF9yZWYyLnN0YXRlOwogICAgICAgICAgICAgIF9jb250ZXh0Mi5uZXh0ID0gMzsKICAgICAgICAgICAgICByZXR1cm4gX2dldEluZm8oc3RhdGUudG9rZW4pOwoKICAgICAgICAgICAgY2FzZSAzOgogICAgICAgICAgICAgIHJlc3VsdCA9IF9jb250ZXh0Mi5zZW50OwoKICAgICAgICAgICAgICBpZiAoIShyZXN1bHQuY29kZSA9PT0gMjAwKSkgewogICAgICAgICAgICAgICAgX2NvbnRleHQyLm5leHQgPSAxMDsKICAgICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgY29tbWl0KCdTRVRfTkFNRScsIHJlc3VsdC5kYXRhLnVzZXJuYW1lKTsKICAgICAgICAgICAgICBjb21taXQoJ1NFVF9BVkFUQVInLCAnaHR0cHM6Ly93cGltZy53YWxsc3Rjbi5jb20vZjc3ODczOGMtZTRmOC00ODcwLWI2MzQtNTY3MDNiNGFjYWZlLmdpZicpOwogICAgICAgICAgICAgIHJldHVybiBfY29udGV4dDIuYWJydXB0KCJyZXR1cm4iLCAnb2snKTsKCiAgICAgICAgICAgIGNhc2UgMTA6CiAgICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0Mi5hYnJ1cHQoInJldHVybiIsIFByb21pc2UobmV3IEVycm9yKCfpqozor4HlpLHotKXvvIzor7fph43mlrDnmbvlvZUnKSkpOwoKICAgICAgICAgICAgY2FzZSAxMToKICAgICAgICAgICAgY2FzZSAiZW5kIjoKICAgICAgICAgICAgICByZXR1cm4gX2NvbnRleHQyLnN0b3AoKTsKICAgICAgICAgIH0KICAgICAgICB9CiAgICAgIH0sIF9jYWxsZWUyKTsKICAgIH0pKSgpOwogIH0sCiAgLy8gdXNlciBsb2dvdXQKICBsb2dvdXQ6IGZ1bmN0aW9uIGxvZ291dChfcmVmMykgewogICAgcmV0dXJuIF9hc3luY1RvR2VuZXJhdG9yKCAvKiNfX1BVUkVfXyovX3JlZ2VuZXJhdG9yUnVudGltZSgpLm1hcmsoZnVuY3Rpb24gX2NhbGxlZTMoKSB7CiAgICAgIHZhciBjb21taXQsIHN0YXRlLCByZXN1bHQ7CiAgICAgIHJldHVybiBfcmVnZW5lcmF0b3JSdW50aW1lKCkud3JhcChmdW5jdGlvbiBfY2FsbGVlMyQoX2NvbnRleHQzKSB7CiAgICAgICAgd2hpbGUgKDEpIHsKICAgICAgICAgIHN3aXRjaCAoX2NvbnRleHQzLnByZXYgPSBfY29udGV4dDMubmV4dCkgewogICAgICAgICAgICBjYXNlIDA6CiAgICAgICAgICAgICAgY29tbWl0ID0gX3JlZjMuY29tbWl0LCBzdGF0ZSA9IF9yZWYzLnN0YXRlOwogICAgICAgICAgICAgIF9jb250ZXh0My5uZXh0ID0gMzsKICAgICAgICAgICAgICByZXR1cm4gX2xvZ291dChzdGF0ZS50b2tlbik7CgogICAgICAgICAgICBjYXNlIDM6CiAgICAgICAgICAgICAgcmVzdWx0ID0gX2NvbnRleHQzLnNlbnQ7CgogICAgICAgICAgICAgIGlmICghKHJlc3VsdC5jb2RlID09PSAyMDApKSB7CiAgICAgICAgICAgICAgICBfY29udGV4dDMubmV4dCA9IDEwOwogICAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICByZW1vdmVUb2tlbigpOyAvLyBtdXN0IHJlbW92ZSAgdG9rZW4gIGZpcnN0CgogICAgICAgICAgICAgIHJlc2V0Um91dGVyKCk7CiAgICAgICAgICAgICAgY29tbWl0KCdSRVNFVF9TVEFURScpOwogICAgICAgICAgICAgIF9jb250ZXh0My5uZXh0ID0gMTE7CiAgICAgICAgICAgICAgYnJlYWs7CgogICAgICAgICAgICBjYXNlIDEwOgogICAgICAgICAgICAgIHJldHVybiBfY29udGV4dDMuYWJydXB0KCJyZXR1cm4iLCBQcm9taXNlKG5ldyBFcnJvcign6YCA5Ye65aSx6LSl77yM6K+36YeN5paw55m75b2VJykpKTsKCiAgICAgICAgICAgIGNhc2UgMTE6CiAgICAgICAgICAgIGNhc2UgImVuZCI6CiAgICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0My5zdG9wKCk7CiAgICAgICAgICB9CiAgICAgICAgfQogICAgICB9LCBfY2FsbGVlMyk7CiAgICB9KSkoKTsKICB9LAogIC8vIHJlbW92ZSB0b2tlbgogIHJlc2V0VG9rZW46IGZ1bmN0aW9uIHJlc2V0VG9rZW4oX3JlZjQpIHsKICAgIHZhciBjb21taXQgPSBfcmVmNC5jb21taXQ7CiAgICByZXR1cm4gbmV3IFByb21pc2UoZnVuY3Rpb24gKHJlc29sdmUpIHsKICAgICAgcmVtb3ZlVG9rZW4oKTsgLy8gbXVzdCByZW1vdmUgIHRva2VuICBmaXJzdAoKICAgICAgY29tbWl0KCdSRVNFVF9TVEFURScpOwogICAgICByZXNvbHZlKCk7CiAgICB9KTsKICB9Cn07CmV4cG9ydCBkZWZhdWx0IHsKICBuYW1lc3BhY2VkOiB0cnVlLAogIHN0YXRlOiBzdGF0ZSwKICBtdXRhdGlvbnM6IG11dGF0aW9ucywKICBhY3Rpb25zOiBhY3Rpb25zCn07"},{"version":3,"names":["login","logout","getInfo","getToken","setToken","removeToken","resetRouter","getDefaultState","token","name","avatar","state","mutations","RESET_STATE","Object","assign","SET_TOKEN","SET_NAME","SET_AVATAR","actions","userInfo","commit","username","password","trim","result","code","data","Promise","Error","resetToken","resolve","namespaced"],"sources":["/Users/rowan/Desktop/vue-admin-template/src/store/modules/user.js"],"sourcesContent":["import { login, logout, getInfo } from '@/api/user'\nimport { getToken, setToken, removeToken } from '@/utils/auth'\nimport { resetRouter } from '@/router'\n\nconst getDefaultState = () => {\n  return {\n    token: getToken(),\n    name: '',\n    avatar: ''\n  }\n}\n\nconst state = getDefaultState()\n\nconst mutations = {\n  RESET_STATE: (state) => {\n    Object.assign(state, getDefaultState())\n  },\n  SET_TOKEN: (state, token) => {\n    state.token = token\n  },\n  SET_NAME: (state, name) => {\n    state.name = name\n  },\n  SET_AVATAR: (state, avatar) => {\n    state.avatar = avatar\n  }\n}\n\nconst actions = {\n  // user login\n  async login({ commit }, userInfo) {\n    const { username, password } = userInfo\n    let result = await login({ username: username.trim(), password: password });\n    if (result.code === 200) {\n      commit('SET_TOKEN', result.data.token)\n      setToken(result.data.token)\n      return 'ok'\n    } else {\n      return Promise(new Error('failed'))\n    }\n  },\n\n  // get user info\n  async getInfo({ commit, state }) {\n    let result = await getInfo(state.token);\n    // 登录成功\n    if (result.code === 200) {\n      commit('SET_NAME', result.data.username)\n      commit('SET_AVATAR', 'https://wpimg.wallstcn.com/f778738c-e4f8-4870-b634-56703b4acafe.gif')\n      return 'ok'\n    } else {\n      return Promise(new Error('验证失败，请重新登录'))\n    }\n  },\n\n  // user logout\n  async logout({ commit, state }) {\n    let result = await logout(state.token);\n    if (result.code === 200) {\n      removeToken() // must remove  token  first\n      resetRouter()\n      commit('RESET_STATE')\n    }else{\n      return Promise(new Error('退出失败，请重新登录'))\n    }\n  },\n\n  // remove token\n  resetToken({ commit }) {\n    return new Promise(resolve => {\n      removeToken() // must remove  token  first\n      commit('RESET_STATE')\n      resolve()\n    })\n  }\n}\n\nexport default {\n  namespaced: true,\n  state,\n  mutations,\n  actions\n}\n\n"],"mappings":"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"}]}